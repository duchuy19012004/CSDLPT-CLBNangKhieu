@model IEnumerable<ClubManagement.Models.FragmentationConfig>
@{
    ViewData["Title"] = "Cấu hình phân mảnh";
}

<h2><i class="fas fa-cogs me-2"></i>Cấu hình phân mảnh dữ liệu</h2>

@if (TempData["SuccessMessage"] != null)
{
    <div class="alert alert-success alert-dismissible fade show" role="alert">
        <i class="fas fa-check-circle me-2"></i>@TempData["SuccessMessage"]
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>
}

<div class="card mb-3">
    <div class="card-body">
        <p class="mb-0">
            <i class="fas fa-info-circle text-info me-2"></i>
            Cấu hình phân mảnh theo thuộc tính. 
            <strong>SiteA_Khoa</strong>: Danh sách khoa thuộc Site A (phân cách bởi dấu phẩy). 
            <strong>SiteB_Khoa</strong>: Danh sách khoa thuộc Site B.
        </p>
    </div>
</div>

<div class="mb-3">
    <a asp-action="Statistics" class="btn btn-info">
        <i class="fas fa-chart-bar me-2"></i>Xem thống kê phân bổ
    </a>
</div>

<div class="card">
    <div class="card-body">
        <table class="table table-hover">
            <thead class="table-dark">
                <tr>
                    <th>Khóa cấu hình</th>
                    <th>Giá trị</th>
                    <th>Mô tả</th>
                    <th>Cập nhật lần cuối</th>
                    <th>Thao tác</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var config in Model)
                {
                    <tr>
                        <td><strong>@config.ConfigKey</strong></td>
                        <td>
                            <span class="badge bg-primary fs-6">@config.ConfigValue</span>
                        </td>
                        <td>@config.Description</td>
                        <td>
                            @if (config.LastModified.HasValue)
                            {
                                @config.LastModified.Value.ToString("dd/MM/yyyy HH:mm")
                            }
                        </td>
                        <td>
                            <a asp-action="Edit" asp-route-configKey="@config.ConfigKey" 
                               class="btn btn-sm btn-warning">
                                <i class="fas fa-edit me-1"></i>Chỉnh sửa
                            </a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

<div class="mt-3">
    <a asp-controller="Home" asp-action="Index" class="btn btn-secondary">
        <i class="fas fa-arrow-left me-2"></i>Quay lại trang chủ
    </a>
</div>
